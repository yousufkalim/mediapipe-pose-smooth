{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["/**\n * This will remove the jitter and smooth the landmarks given by Mediapipe\n * @author Yousuf Kalim\n */\n\nlet frameSets = [];\nlet smoothFrame = [];\n\n/**\n * smoothLandmarks\n * @param {Object} results This should be coming directly from Mediapipe\n * @param {Function} onResults Optional: If you want to call other function instead of getting return\n * @returns {Void}\n */\nconst smoothLandmarks = (results, onResults) => {\n  // Pushing frame at the end of frameSet array\n  if (results.poseLandmarks) {\n    frameSets.push(results.poseLandmarks);\n  }\n\n  if (frameSets.length === 8) {\n    // This loop will run 33 time to make average of each joint\n    for (let i = 0; i < 33; i++) {\n      // Making an array of each joint coordinates\n      let x = frameSets.map((a) => a[i].x);\n      let y = frameSets.map((a) => a[i].y);\n      let z = frameSets.map((a) => a[i].z);\n      let visibility = frameSets.map((a) => a[i].visibility);\n\n      // Sorting the array into ascending order\n      x = x.sort((a, b) => a - b);\n      y = y.sort((a, b) => a - b);\n      z = z.sort((a, b) => a - b);\n      visibility = visibility.sort((a, b) => a - b);\n\n      // Dropping 2 min and 2 max coordinates\n      x = x.slice(2, 6);\n      y = y.slice(2, 6);\n      z = z.slice(2, 6);\n      visibility = visibility.slice(2, 6);\n\n      // Making the average of 4 remaining coordinates\n      smoothFrame[i] = {\n        x: x.reduce((a, b) => a + b, 0) / x.length,\n        y: y.reduce((a, b) => a + b, 0) / y.length,\n        z: z.reduce((a, b) => a + b, 0) / z.length,\n        visibility: visibility.reduce((a, b) => a + b, 0) / visibility.length,\n      };\n    }\n\n    // Removing the first frame from frameSet\n    frameSets.shift();\n  }\n\n  // after first 8 frames we have averaged coordinates, So now updating the poseLandmarks with averaged coordinates\n  if (smoothFrame.length > 0) {\n    results.poseLandmarks = smoothFrame;\n  }\n\n  return onResults ? onResults(results) : results;\n};\n\nexport default smoothLandmarks;\n"],"names":["smoothFrame","smoothLandmarks","results","onResults","poseLandmarks","frameSets","push","length","i","map","a","x","y","z","visibility","sort","b","slice","reduce","shift"],"mappings":"AAKA,MAAgB,GACZA,EAAc,GAQZC,MAAAA,EAAkB,CAACC,EAASC,KAMhC,GAJID,EAAQE,eACVC,EAAUC,KAAKJ,EAAQE,eAGA,IAArBC,EAAUE,OAAc,CAE1B,IAAK,IAAKC,EAAG,EAAGA,EAAI,GAAIA,IAAK,CAE3B,MAAQH,EAAUI,IAAKC,GAAMA,EAAEF,GAAGG,KAC1BN,EAAUI,IAAKC,GAAMA,EAAEF,GAAGI,KAC1BP,EAAUI,IAAKC,GAAMA,EAAEF,GAAGK,KACjBR,EAAUI,IAAKC,GAAMA,EAAEF,GAAGM,YAG3CH,EAAIA,EAAEI,KAAK,CAACL,EAAGM,IAAMN,EAAIM,GACzBJ,EAAIA,EAAEG,KAAK,CAACL,EAAGM,IAAMN,EAAIM,GACzBH,EAAIA,EAAEE,KAAK,CAACL,EAAGM,IAAMN,EAAIM,GACzBF,EAAaA,EAAWC,KAAK,CAACL,EAAGM,IAAMN,EAAIM,GAG3CL,EAAIA,EAAEM,MAAM,EAAG,GACfL,EAAIA,EAAEK,MAAM,EAAG,GACfJ,EAAIA,EAAEI,MAAM,EAAG,GACfH,EAAaA,EAAWG,MAAM,EAAG,GAGjCjB,EAAYQ,GAAK,CACfG,EAAGA,EAAEO,OAAO,CAACR,EAAGM,IAAMN,EAAIM,EAAG,GAAKL,EAAEJ,OACpCK,EAAGA,EAAEM,OAAO,CAACR,EAAGM,IAAMN,EAAIM,EAAG,GAAKJ,EAAEL,OACpCM,EAAGA,EAAEK,OAAO,CAACR,EAAGM,IAAMN,EAAIM,EAAG,GAAKH,EAAEN,OACpCO,WAAYA,EAAWI,OAAO,CAACR,EAAGM,IAAMN,EAAIM,EAAG,GAAKF,EAAWP,OAEnE,CAGAF,EAAUc,OACZ,CAOA,OAJInB,EAAYO,OAAS,IACvBL,EAAQE,cAAgBJ,GAGnBG,EAAYA,EAAUD,GAAWA"}